var Gn=Object.defineProperty;var Kn=(t,e,n)=>e in t?Gn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ee=(t,e,n)=>(Kn(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function U(){}const De=t=>t;function te(t,e){for(const n in e)t[n]=e[n];return t}function nn(t){return t()}function mt(){return Object.create(null)}function ie(t){t.forEach(nn)}function Pe(t){return typeof t=="function"}function F(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Yn(t){return Object.keys(t).length===0}function ut(t,...e){if(t==null)return U;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function _e(t){let e;return ut(t,n=>e=n)(),e}function D(t,e,n){t.$$.on_destroy.push(ut(e,n))}function Oe(t,e,n,s){if(t){const l=sn(t,e,n,s);return t[0](l)}}function sn(t,e,n,s){return t[1]&&s?te(n.ctx.slice(),t[1](s(e))):n.ctx}function Me(t,e,n,s){if(t[2]&&s){const l=t[2](s(n));if(e.dirty===void 0)return l;if(typeof l=="object"){const o=[],i=Math.max(e.dirty.length,l.length);for(let r=0;r<i;r+=1)o[r]=e.dirty[r]|l[r];return o}return e.dirty|l}return e.dirty}function Te(t,e,n,s,l,o){if(l){const i=sn(e,n,s,o);t.p(i,l)}}function Le(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let s=0;s<n;s++)e[s]=-1;return e}return-1}function _t(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function gt(t,e){const n={};e=new Set(e);for(const s in t)!e.has(s)&&s[0]!=="$"&&(n[s]=t[s]);return n}function Vn(t){return t&&Pe(t.destroy)?t.destroy:U}function pt(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const Qn=["",!0,1,"true","contenteditable"],ln=typeof window<"u";let Jn=ln?()=>window.performance.now():()=>Date.now(),ct=ln?t=>requestAnimationFrame(t):U;const de=new Set;function on(t){de.forEach(e=>{e.c(t)||(de.delete(e),e.f())}),de.size!==0&&ct(on)}function Xn(t){let e;return de.size===0&&ct(on),{promise:new Promise(n=>{de.add(e={c:t,f:n})}),abort(){de.delete(e)}}}function L(t,e){t.appendChild(e)}function rn(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Zn(t){const e=R("style");return xn(rn(t),e),e.sheet}function xn(t,e){return L(t.head||t,e),e.sheet}function y(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode&&t.parentNode.removeChild(t)}function ue(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function R(t){return document.createElement(t)}function j(t){return document.createTextNode(t)}function P(){return j(" ")}function ve(){return j("")}function ye(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function S(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const es=["width","height"];function Be(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const s in e)e[s]==null?t.removeAttribute(s):s==="style"?t.style.cssText=e[s]:s==="__value"?t.value=t[s]=e[s]:n[s]&&n[s].set&&es.indexOf(s)===-1?t[s]=e[s]:S(t,s,e[s])}function ts(t){return Array.from(t.childNodes)}function Ye(t,e){e=""+e,t.data!==e&&(t.data=e)}function ns(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function ss(t,e,n){~Qn.indexOf(n)?ns(t,e):Ye(t,e)}function ge(t,e,n,s){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function N(t,e,n){t.classList[n?"add":"remove"](e)}function un(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(t,n,s,e),l}function bt(t,e){return new t(e)}const ze=new Map;let We=0;function ls(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function os(t,e){const n={stylesheet:Zn(e),rules:{}};return ze.set(t,n),n}function vt(t,e,n,s,l,o,i,r=0){const u=16.666/s;let c=`{
`;for(let _=0;_<=1;_+=u){const d=e+(n-e)*o(_);c+=_*100+`%{${i(d,1-d)}}
`}const a=c+`100% {${i(n,1-n)}}
}`,f=`__svelte_${ls(a)}_${r}`,h=rn(t),{stylesheet:m,rules:w}=ze.get(h)||os(h,t);w[f]||(w[f]=!0,m.insertRule(`@keyframes ${f} ${a}`,m.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${f} ${s}ms linear ${l}ms 1 both`,We+=1,f}function rs(t,e){const n=(t.style.animation||"").split(", "),s=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),l=n.length-s.length;l&&(t.style.animation=s.join(", "),We-=l,We||is())}function is(){ct(()=>{We||(ze.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&b(e)}),ze.clear())})}let Ie;function Ce(t){Ie=t}function Ne(){if(!Ie)throw new Error("Function called outside component initialization");return Ie}function cn(t){Ne().$$.on_mount.push(t)}function us(t){Ne().$$.on_destroy.push(t)}function fn(){const t=Ne();return(e,n,{cancelable:s=!1}={})=>{const l=t.$$.callbacks[e];if(l){const o=un(e,n,{cancelable:s});return l.slice().forEach(i=>{i.call(t,o)}),!o.defaultPrevented}return!0}}function Ae(t,e){return Ne().$$.context.set(t,e),e}function ne(t){return Ne().$$.context.get(t)}function an(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(s=>s.call(this,e))}const he=[],yt=[];let me=[];const $t=[],hn=Promise.resolve();let ot=!1;function dn(){ot||(ot=!0,hn.then(mn))}function cs(){return dn(),hn}function pe(t){me.push(t)}const Ze=new Set;let fe=0;function mn(){if(fe!==0)return;const t=Ie;do{try{for(;fe<he.length;){const e=he[fe];fe++,Ce(e),fs(e.$$)}}catch(e){throw he.length=0,fe=0,e}for(Ce(null),he.length=0,fe=0;yt.length;)yt.pop()();for(let e=0;e<me.length;e+=1){const n=me[e];Ze.has(n)||(Ze.add(n),n())}me.length=0}while(he.length);for(;$t.length;)$t.pop()();ot=!1,Ze.clear(),Ce(t)}function fs(t){if(t.fragment!==null){t.update(),ie(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(pe)}}function as(t){const e=[],n=[];me.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),me=e}let Se;function hs(){return Se||(Se=Promise.resolve(),Se.then(()=>{Se=null})),Se}function xe(t,e,n){t.dispatchEvent(un(`${e?"intro":"outro"}${n}`))}const Fe=new Set;let J;function z(){J={r:0,c:[],p:J}}function W(){J.r||ie(J.c),J=J.p}function p(t,e){t&&t.i&&(Fe.delete(t),t.i(e))}function $(t,e,n,s){if(t&&t.o){if(Fe.has(t))return;Fe.add(t),J.c.push(()=>{Fe.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}const ds={duration:0};function He(t,e,n,s){const l={direction:"both"};let o=e(t,n,l),i=s?0:1,r=null,u=null,c=null;function a(){c&&rs(t,c)}function f(m,w){const g=m.b-i;return w*=Math.abs(g),{a:i,b:m.b,d:g,duration:w,start:m.start,end:m.start+w,group:m.group}}function h(m){const{delay:w=0,duration:g=300,easing:_=De,tick:d=U,css:v}=o||ds,k={start:Jn()+w,b:m};m||(k.group=J,J.r+=1),r||u?u=k:(v&&(a(),c=vt(t,i,m,g,w,_,v)),m&&d(0,1),r=f(k,g),pe(()=>xe(t,m,"start")),Xn(A=>{if(u&&A>u.start&&(r=f(u,g),u=null,xe(t,r.b,"start"),v&&(a(),c=vt(t,i,r.b,r.duration,0,_,o.css))),r){if(A>=r.end)d(i=r.b,1-i),xe(t,r.b,"end"),u||(r.b?a():--r.group.r||ie(r.group.c)),r=null;else if(A>=r.start){const C=A-r.start;i=r.a+r.d*_(C/r.duration),d(i,1-i)}}return!!(r||u)}))}return{run(m){Pe(o)?hs().then(()=>{o=o(l),h(m)}):h(m)},end(){a(),r=u=null}}}function ms(t,e){const n={},s={},l={$$scope:1};let o=t.length;for(;o--;){const i=t[o],r=e[o];if(r){for(const u in i)u in r||(s[u]=1);for(const u in r)l[u]||(n[u]=r[u],l[u]=1);t[o]=r}else for(const u in i)l[u]=1}for(const i in s)i in n||(n[i]=void 0);return n}function wt(t){return typeof t=="object"&&t!==null?t:{}}function T(t){t&&t.c()}function O(t,e,n,s){const{fragment:l,after_update:o}=t.$$;l&&l.m(e,n),s||pe(()=>{const i=t.$$.on_mount.map(nn).filter(Pe);t.$$.on_destroy?t.$$.on_destroy.push(...i):ie(i),t.$$.on_mount=[]}),o.forEach(pe)}function M(t,e){const n=t.$$;n.fragment!==null&&(as(n.after_update),ie(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function _s(t,e){t.$$.dirty[0]===-1&&(he.push(t),dn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function H(t,e,n,s,l,o,i,r=[-1]){const u=Ie;Ce(t);const c=t.$$={fragment:null,ctx:[],props:o,update:U,not_equal:l,bound:mt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:mt(),dirty:r,skip_bound:!1,root:e.target||u.$$.root};i&&i(c.root);let a=!1;if(c.ctx=n?n(t,e.props||{},(f,h,...m)=>{const w=m.length?m[0]:h;return c.ctx&&l(c.ctx[f],c.ctx[f]=w)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](w),a&&_s(t,f)),h}):[],c.update(),a=!0,ie(c.before_update),c.fragment=s?s(c.ctx):!1,e.target){if(e.hydrate){const f=ts(e.target);c.fragment&&c.fragment.l(f),f.forEach(b)}else c.fragment&&c.fragment.c();e.intro&&p(t.$$.fragment),O(t,e.target,e.anchor,e.customElement),mn()}Ce(u)}class q{$destroy(){M(this,1),this.$destroy=U}$on(e,n){if(!Pe(n))return U;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const l=s.indexOf(n);l!==-1&&s.splice(l,1)}}$set(e){this.$$set&&!Yn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const kt=t=>typeof t>"u",gs=t=>typeof t=="function",_n=t=>typeof t=="number";function ps(t){return!t.defaultPrevented&&t.button===0&&!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gn(){let t=0;return()=>t++}function bs(){return Math.random().toString(36).substring(2)}const se=typeof window>"u";function ft(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}const pn=(t,e)=>t?{}:{style:e},rt=t=>({"aria-hidden":"true",...pn(t,"display:none;")}),ae=[];function vs(t,e){return{subscribe:B(t,e).subscribe}}function B(t,e=U){let n;const s=new Set;function l(r){if(F(t,r)&&(t=r,n)){const u=!ae.length;for(const c of s)c[1](),ae.push(c,t);if(u){for(let c=0;c<ae.length;c+=2)ae[c][0](ae[c+1]);ae.length=0}}}function o(r){l(r(t))}function i(r,u=U){const c=[r,u];return s.add(c),s.size===1&&(n=e(l)||U),r(t),()=>{s.delete(c),s.size===0&&n&&(n(),n=null)}}return{set:l,update:o,subscribe:i}}function ys(t,e,n){const s=!Array.isArray(t),l=s?[t]:t,o=e.length<2;return vs(n,i=>{let r=!1;const u=[];let c=0,a=U;const f=()=>{if(c)return;a();const m=e(s?u[0]:u,i);o?i(m):a=Pe(m)?m:U},h=l.map((m,w)=>ut(m,g=>{u[w]=g,c&=~(1<<w),r&&f()},()=>{c|=1<<w}));return r=!0,f(),function(){ie(h),a(),r=!1}})}const Ue=t=>`@@svnav-ctx__${t}`,it=Ue("LOCATION"),be=Ue("ROUTER"),bn=Ue("ROUTE"),$s=Ue("ROUTE_PARAMS"),ws=Ue("FOCUS_ELEM"),vn=/^:(.+)/,Re=(t,e,n)=>t.substr(e,n),Et=(t,e)=>Re(t,0,e.length)===e,ks=t=>t==="",Es=t=>vn.test(t),yn=t=>t[0]==="*",Ss=t=>t.replace(/\*.*$/,""),$n=t=>t.replace(/(^\/+|\/+$)/g,"");function K(t,e=!1){const n=$n(t).split("/");return e?n.filter(Boolean):n}const et=(t,e)=>t+(e?`?${e}`:""),at=t=>`/${$n(t)}`;function je(...t){const e=s=>K(s,!0).join("/"),n=t.map(e).join("/");return at(n)}const wn=1,Ve=2,oe=3,Rs=4,kn=5,Cs=6,En=7,As=8,Is=9,Sn=10,Rn=11,Ps={[wn]:"Link",[Ve]:"Route",[oe]:"Router",[Rs]:"useFocus",[kn]:"useLocation",[Cs]:"useMatch",[En]:"useNavigate",[As]:"useParams",[Is]:"useResolvable",[Sn]:"useResolve",[Rn]:"navigate"},ht=t=>Ps[t];function Os(t,e){let n;return t===Ve?n=e.path?`path="${e.path}"`:"default":t===wn?n=`to="${e.to}"`:t===oe&&(n=`basepath="${e.basepath||""}"`),`<${ht(t)} ${n||""} />`}function Ms(t,e,n,s){const l=n&&Os(s||t,n),o=l?`

Occurred in: ${l}`:"",i=ht(t),r=gs(e)?e(i):e;return`<${i}> ${r}${o}`}const Cn=t=>(...e)=>t(Ms(...e)),An=Cn(t=>{throw new Error(t)}),qe=Cn(console.warn),St=4,Ts=3,Ls=2,Ns=1,Us=1;function js(t,e){const n=t.default?0:K(t.fullPath).reduce((s,l)=>{let o=s;return o+=St,ks(l)?o+=Us:Es(l)?o+=Ls:yn(l)?o-=St+Ns:o+=Ts,o},0);return{route:t,score:n,index:e}}function Fs(t){return t.map(js).sort((e,n)=>e.score<n.score?1:e.score>n.score?-1:e.index-n.index)}function In(t,e){let n,s;const[l]=e.split("?"),o=K(l),i=o[0]==="",r=Fs(t);for(let u=0,c=r.length;u<c;u++){const{route:a}=r[u];let f=!1;const h={},m=d=>({...a,params:h,uri:d});if(a.default){s=m(e);continue}const w=K(a.fullPath),g=Math.max(o.length,w.length);let _=0;for(;_<g;_++){const d=w[_],v=o[_];if(!kt(d)&&yn(d)){const A=d==="*"?"*":d.slice(1);h[A]=o.slice(_).map(decodeURIComponent).join("/");break}if(kt(v)){f=!0;break}const k=vn.exec(d);if(k&&!i){const A=decodeURIComponent(v);h[k[1]]=A}else if(d!==v){f=!0;break}}if(!f){n=m(je(...o.slice(0,_)));break}}return n||s||null}function Pn(t,e){return In([t],e)}function Ds(t,e){if(Et(t,"/"))return t;const[n,s]=t.split("?"),[l]=e.split("?"),o=K(n),i=K(l);if(o[0]==="")return et(l,s);if(!Et(o[0],".")){const c=i.concat(o).join("/");return et((l==="/"?"":"/")+c,s)}const r=i.concat(o),u=[];return r.forEach(c=>{c===".."?u.pop():c!=="."&&u.push(c)}),et(`/${u.join("/")}`,s)}function Rt(t,e){const{pathname:n,hash:s="",search:l="",state:o}=t,i=K(e,!0),r=K(n,!0);for(;i.length;)i[0]!==r[0]&&An(oe,`Invalid state: All locations must begin with the basepath "${e}", found "${n}"`),i.shift(),r.shift();return{pathname:je(...r),hash:s,search:l,state:o}}const Ct=t=>t.length===1?"":t,On=t=>{const e=t.indexOf("?"),n=t.indexOf("#"),s=e!==-1,l=n!==-1,o=l?Ct(Re(t,n)):"",i=l?Re(t,0,n):t,r=s?Ct(Re(i,e)):"";return{pathname:(s?Re(i,0,e):i)||"/",search:r,hash:o}};function Bs(t,e,n){return je(n,Ds(t,e))}function zs(t,e){const n=at(Ss(t)),s=K(n,!0),l=K(e,!0).slice(0,s.length),o=Pn({fullPath:n},je(...l));return o&&o.uri}const tt="POP",Ws="PUSH",Hs="REPLACE";function nt(t){return{...t.location,pathname:encodeURI(decodeURI(t.location.pathname)),state:t.history.state,_key:t.history.state&&t.history.state._key||"initial"}}function qs(t){let e=[],n=nt(t),s=tt;const l=(o=e)=>o.forEach(i=>i({location:n,action:s}));return{get location(){return n},listen(o){e.push(o);const i=()=>{n=nt(t),s=tt,l([o])};l([o]);const r=ft(t,"popstate",i);return()=>{r(),e=e.filter(u=>u!==o)}},navigate(o,i){const{state:r={},replace:u=!1}=i||{};if(s=u?Hs:Ws,_n(o))i&&qe(Rn,"Navigation options (state or replace) are not supported, when passing a number as the first argument to navigate. They are ignored."),s=tt,t.history.go(o);else{const c={...r,_key:bs()};try{t.history[u?"replaceState":"pushState"](c,"",o)}catch{t.location[u?"replace":"assign"](o)}}n=nt(t),l()}}}function st(t,e){return{...On(e),state:t}}function Gs(t="/"){let e=0,n=[st(null,t)];return{get entries(){return n},get location(){return n[e]},addEventListener(){},removeEventListener(){},history:{get state(){return n[e].state},pushState(s,l,o){e++,n=n.slice(0,e),n.push(st(s,o))},replaceState(s,l,o){n[e]=st(s,o)},go(s){const l=e+s;l<0||l>n.length-1||(e=l)}}}}const Ks=!!(!se&&window.document&&window.document.createElement),Ys=!se&&window.location.origin==="null",Mn=qs(Ks&&!Ys?window:Gs()),{navigate:Tn}=Mn;let Q=null,Ln=!0;function Vs(t,e){const n=document.querySelectorAll("[data-svnav-router]");for(let s=0;s<n.length;s++){const l=n[s],o=Number(l.dataset.svnavRouter);if(o===t)return!0;if(o===e)return!1}return!1}function Qs(t){(!Q||t.level>Q.level||t.level===Q.level&&Vs(t.routerId,Q.routerId))&&(Q=t)}function Js(){Q=null}function Xs(){Ln=!1}function At(t){if(!t)return!1;const e="tabindex";try{if(!t.hasAttribute(e)){t.setAttribute(e,"-1");let n;n=ft(t,"blur",()=>{t.removeAttribute(e),n()})}return t.focus(),document.activeElement===t}catch{return!1}}function Zs(t,e){return Number(t.dataset.svnavRouteEnd)===e}function xs(t){return/^H[1-6]$/i.test(t.tagName)}function It(t,e=document){return e.querySelector(t)}function el(t){let n=It(`[data-svnav-route-start="${t}"]`).nextElementSibling;for(;!Zs(n,t);){if(xs(n))return n;const s=It("h1,h2,h3,h4,h5,h6",n);if(s)return s;n=n.nextElementSibling}return null}function tl(t){Promise.resolve(_e(t.focusElement)).then(e=>{const n=e||el(t.id);n||qe(oe,`Could not find an element to focus. You should always render a header for accessibility reasons, or set a custom focus element via the "useFocus" hook. If you don't want this Route or Router to manage focus, pass "primary={false}" to it.`,t,Ve),!At(n)&&At(document.documentElement)})}const nl=(t,e,n)=>(s,l)=>cs().then(()=>{if(!Q||Ln){Xs();return}if(s&&tl(Q.route),t.announcements&&l){const{path:o,fullPath:i,meta:r,params:u,uri:c}=Q.route,a=t.createAnnouncement({path:o,fullPath:i,meta:r,params:u,uri:c},_e(n));Promise.resolve(a).then(f=>{e.set(f)})}Js()}),sl="position:fixed;top:-1px;left:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;";function ll(t){let e,n,s=[{role:"status"},{"aria-atomic":"true"},{"aria-live":"polite"},{"data-svnav-announcer":""},pn(t[6],sl)],l={};for(let o=0;o<s.length;o+=1)l=te(l,s[o]);return{c(){e=R("div"),n=j(t[0]),Be(e,l)},m(o,i){y(o,e,i),L(e,n)},p(o,i){i[0]&1&&ss(n,o[0],l.contenteditable)},d(o){o&&b(e)}}}function ol(t){let e,n,s,l,o,i=[rt(t[6]),{"data-svnav-router":t[3]}],r={};for(let f=0;f<i.length;f+=1)r=te(r,i[f]);const u=t[22].default,c=Oe(u,t,t[21],null);let a=t[2]&&t[4]&&t[1].announcements&&ll(t);return{c(){e=R("div"),n=P(),c&&c.c(),s=P(),a&&a.c(),l=ve(),Be(e,r)},m(f,h){y(f,e,h),y(f,n,h),c&&c.m(f,h),y(f,s,h),a&&a.m(f,h),y(f,l,h),o=!0},p(f,h){c&&c.p&&(!o||h[0]&2097152)&&Te(c,u,f,f[21],o?Me(u,f[21],h,null):Le(f[21]),null),f[2]&&f[4]&&f[1].announcements&&a.p(f,h)},i(f){o||(p(c,f),o=!0)},o(f){$(c,f),o=!1},d(f){f&&b(e),f&&b(n),c&&c.d(f),f&&b(s),a&&a.d(f),f&&b(l)}}}const rl=gn(),Pt="/";function il(t,e,n){let s,l,o,i,r,{$$slots:u={},$$scope:c}=e,{basepath:a=Pt}=e,{url:f=null}=e,{history:h=Mn}=e,{primary:m=!0}=e,{a11y:w={}}=e,{disableInlineStyles:g=!1}=e;const _={createAnnouncement:E=>`Navigated to ${E.uri}`,announcements:!0,...w},d=a,v=at(a),k=ne(it),A=ne(be),C=!k,Y=rl(),le=m&&!(A&&!A.manageFocus),Z=B("");D(t,Z,E=>n(0,r=E));const $e=A?A.disableInlineStyles:g,V=B([]);D(t,V,E=>n(20,i=E));const ce=B(null);D(t,ce,E=>n(18,l=E));let I=!1;const we=C?0:A.level+1,ke=C?B((()=>Rt(se?On(f):h.location,v))()):k;D(t,ke,E=>n(17,s=E));const Xe=B(s);D(t,Xe,E=>n(19,o=E));const Wn=nl(_,Z,ke),dt=E=>G=>G.filter(x=>x.id!==E);function Hn(E){if(se){if(I)return;const G=Pn(E,s.pathname);if(G)return I=!0,G}else V.update(G=>{const x=dt(E.id)(G);return x.push(E),x})}function qn(E){V.update(dt(E))}return!C&&a!==Pt&&qe(oe,'Only top-level Routers can have a "basepath" prop. It is ignored.',{basepath:a}),C&&(cn(()=>h.listen(G=>{const x=Rt(G.location,v);Xe.set(s),ke.set(x)})),Ae(it,ke)),Ae(be,{activeRoute:ce,registerRoute:Hn,unregisterRoute:qn,manageFocus:le,level:we,id:Y,history:C?h:A.history,basepath:C?v:A.basepath,disableInlineStyles:$e}),t.$$set=E=>{"basepath"in E&&n(11,a=E.basepath),"url"in E&&n(12,f=E.url),"history"in E&&n(13,h=E.history),"primary"in E&&n(14,m=E.primary),"a11y"in E&&n(15,w=E.a11y),"disableInlineStyles"in E&&n(16,g=E.disableInlineStyles),"$$scope"in E&&n(21,c=E.$$scope)},t.$$.update=()=>{if(t.$$.dirty[0]&2048&&a!==d&&qe(oe,'You cannot change the "basepath" prop. It is ignored.'),t.$$.dirty[0]&1179648){const E=In(i,s.pathname);ce.set(E)}if(t.$$.dirty[0]&655360&&C){const E=!!s.hash,G=!E&&le,x=!E||s.pathname!==o.pathname;Wn(G,x)}t.$$.dirty[0]&262144&&le&&l&&l.primary&&Qs({level:we,routerId:Y,route:l})},[r,_,C,Y,le,Z,$e,V,ce,ke,Xe,a,f,h,m,w,g,s,l,o,i,c,u]}class ul extends q{constructor(e){super(),H(this,e,il,ol,F,{basepath:11,url:12,history:13,primary:14,a11y:15,disableInlineStyles:16},null,[-1,-1])}}const Nn=ul;function Qe(t,e,n=be,s=oe){ne(n)||An(t,o=>`You cannot use ${o} outside of a ${ht(s)}.`,e)}const cl=t=>{const{subscribe:e}=ne(t);return{subscribe:e}};function fl(){return Qe(kn),cl(it)}function al(){const{history:t}=ne(be);return t}function Un(){const t=ne(bn);return t?ys(t,e=>e.base):B("/")}function jn(){Qe(Sn);const t=Un(),{basepath:e}=ne(be);return s=>Bs(s,_e(t),e)}function hl(){Qe(En);const t=jn(),{navigate:e}=al();return(s,l)=>{const o=_n(s)?s:t(s);return e(o,l)}}const dl=t=>({params:t&16,location:t&8}),Ot=t=>({params:se?_e(t[10]):t[4],location:t[3],navigate:t[11]});function Mt(t){let e,n;return e=new Nn({props:{primary:t[1],$$slots:{default:[gl]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment)},m(s,l){O(e,s,l),n=!0},p(s,l){const o={};l&2&&(o.primary=s[1]),l&528409&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function ml(t){let e;const n=t[18].default,s=Oe(n,t,t[19],Ot);return{c(){s&&s.c()},m(l,o){s&&s.m(l,o),e=!0},p(l,o){s&&s.p&&(!e||o&524312)&&Te(s,n,l,l[19],e?Me(n,l[19],o,dl):Le(l[19]),Ot)},i(l){e||(p(s,l),e=!0)},o(l){$(s,l),e=!1},d(l){s&&s.d(l)}}}function _l(t){let e,n,s;const l=[{location:t[3]},{navigate:t[11]},se?_e(t[10]):t[4],t[12]];var o=t[0];function i(r){let u={};for(let c=0;c<l.length;c+=1)u=te(u,l[c]);return{props:u}}return o&&(e=bt(o,i())),{c(){e&&T(e.$$.fragment),n=ve()},m(r,u){e&&O(e,r,u),y(r,n,u),s=!0},p(r,u){const c=u&7192?ms(l,[u&8&&{location:r[3]},u&2048&&{navigate:r[11]},u&1040&&wt(se?_e(r[10]):r[4]),u&4096&&wt(r[12])]):{};if(u&1&&o!==(o=r[0])){if(e){z();const a=e;$(a.$$.fragment,1,0,()=>{M(a,1)}),W()}o?(e=bt(o,i()),T(e.$$.fragment),p(e.$$.fragment,1),O(e,n.parentNode,n)):e=null}else o&&e.$set(c)},i(r){s||(e&&p(e.$$.fragment,r),s=!0)},o(r){e&&$(e.$$.fragment,r),s=!1},d(r){r&&b(n),e&&M(e,r)}}}function gl(t){let e,n,s,l;const o=[_l,ml],i=[];function r(u,c){return u[0]!==null?0:1}return e=r(t),n=i[e]=o[e](t),{c(){n.c(),s=ve()},m(u,c){i[e].m(u,c),y(u,s,c),l=!0},p(u,c){let a=e;e=r(u),e===a?i[e].p(u,c):(z(),$(i[a],1,1,()=>{i[a]=null}),W(),n=i[e],n?n.p(u,c):(n=i[e]=o[e](u),n.c()),p(n,1),n.m(s.parentNode,s))},i(u){l||(p(n),l=!0)},o(u){$(n),l=!1},d(u){i[e].d(u),u&&b(s)}}}function pl(t){let e,n,s,l,o,i=[rt(t[7]),{"data-svnav-route-start":t[5]}],r={};for(let f=0;f<i.length;f+=1)r=te(r,i[f]);let u=t[2]&&Mt(t),c=[rt(t[7]),{"data-svnav-route-end":t[5]}],a={};for(let f=0;f<c.length;f+=1)a=te(a,c[f]);return{c(){e=R("div"),n=P(),u&&u.c(),s=P(),l=R("div"),Be(e,r),Be(l,a)},m(f,h){y(f,e,h),y(f,n,h),u&&u.m(f,h),y(f,s,h),y(f,l,h),o=!0},p(f,[h]){f[2]?u?(u.p(f,h),h&4&&p(u,1)):(u=Mt(f),u.c(),p(u,1),u.m(s.parentNode,s)):u&&(z(),$(u,1,1,()=>{u=null}),W())},i(f){o||(p(u),o=!0)},o(f){$(u),o=!1},d(f){f&&b(e),f&&b(n),u&&u.d(f),f&&b(s),f&&b(l)}}}const bl=gn();function vl(t,e,n){let s;const l=["path","component","meta","primary"];let o=gt(e,l),i,r,u,c,{$$slots:a={},$$scope:f}=e,{path:h=""}=e,{component:m=null}=e,{meta:w={}}=e,{primary:g=!0}=e;Qe(Ve,e);const _=bl(),{registerRoute:d,unregisterRoute:v,activeRoute:k,disableInlineStyles:A}=ne(be);D(t,k,I=>n(16,i=I));const C=Un();D(t,C,I=>n(17,u=I));const Y=fl();D(t,Y,I=>n(3,r=I));const le=B(null);let Z;const $e=B(),V=B({});D(t,V,I=>n(4,c=I)),Ae(bn,$e),Ae($s,V),Ae(ws,le);const ce=hl();return se||us(()=>v(_)),t.$$set=I=>{n(24,e=te(te({},e),_t(I))),n(12,o=gt(e,l)),"path"in I&&n(13,h=I.path),"component"in I&&n(0,m=I.component),"meta"in I&&n(14,w=I.meta),"primary"in I&&n(1,g=I.primary),"$$scope"in I&&n(19,f=I.$$scope)},t.$$.update=()=>{if(t.$$.dirty&155658){const I=h==="",we=je(u,h),Je={id:_,path:h,meta:w,default:I,fullPath:I?"":we,base:I?u:zs(we,r.pathname),primary:g,focusElement:le};$e.set(Je),n(15,Z=d(Je))}if(t.$$.dirty&98304&&n(2,s=!!(Z||i&&i.id===_)),t.$$.dirty&98308&&s){const{params:I}=Z||i;V.set(I)}},e=_t(e),[m,g,s,r,c,_,k,A,C,Y,V,ce,o,h,w,Z,i,u,a,f]}class yl extends q{constructor(e){super(),H(this,e,vl,pl,F,{path:13,component:0,meta:14,primary:1})}}const Tt=yl,$l=t=>(e,n=Tn)=>({destroy:ft(e,"click",o=>{const i=t(o);if(i&&i.target===""&&ps(o)){o.preventDefault();const r=i.pathname+i.search+i.hash;n(r,{replace:i.hasAttribute("replace")})}})}),wl=$l(t=>t.currentTarget);function kl(t){let e,n;const s=t[1].default,l=Oe(s,t,t[0],null);return{c(){e=R("div"),l&&l.c(),S(e,"class","svelte-k0makj")},m(o,i){y(o,e,i),l&&l.m(e,null),n=!0},p(o,[i]){l&&l.p&&(!n||i&1)&&Te(l,s,o,o[0],n?Me(s,o[0],i,null):Le(o[0]),null)},i(o){n||(p(l,o),n=!0)},o(o){$(l,o),n=!1},d(o){o&&b(e),l&&l.d(o)}}}function El(t,e,n){let{$$slots:s={},$$scope:l}=e;return t.$$set=o=>{"$$scope"in o&&n(0,l=o.$$scope)},[l,s]}class Fn extends q{constructor(e){super(),H(this,e,El,kl,F,{})}}function Sl(t){let e,n,s,l,o=!t[2]&&Lt(t);return{c(){e=R("button"),o&&o.c(),S(e,"class","button svelte-1rmphn3"),e.disabled=t[1],N(e,"spinning",t[2])},m(i,r){y(i,e,r),o&&o.m(e,null),n=!0,s||(l=ye(e,"click",t[6]),s=!0)},p(i,r){i[2]?o&&(z(),$(o,1,1,()=>{o=null}),W()):o?(o.p(i,r),r&4&&p(o,1)):(o=Lt(i),o.c(),p(o,1),o.m(e,null)),(!n||r&2)&&(e.disabled=i[1]),(!n||r&4)&&N(e,"spinning",i[2])},i(i){n||(p(o),n=!0)},o(i){$(o),n=!1},d(i){i&&b(e),o&&o.d(),s=!1,l()}}}function Rl(t){let e,n,s,l;const o=t[5].default,i=Oe(o,t,t[4],null);return{c(){e=R("a"),i&&i.c(),S(e,"class","button svelte-1rmphn3"),S(e,"href",t[3]),S(e,"role","button")},m(r,u){y(r,e,u),i&&i.m(e,null),n=!0,s||(l=Vn(wl.call(null,e)),s=!0)},p(r,u){i&&i.p&&(!n||u&16)&&Te(i,o,r,r[4],n?Me(o,r[4],u,null):Le(r[4]),null),(!n||u&8)&&S(e,"href",r[3])},i(r){n||(p(i,r),n=!0)},o(r){$(i,r),n=!1},d(r){r&&b(e),i&&i.d(r),s=!1,l()}}}function Lt(t){let e;const n=t[5].default,s=Oe(n,t,t[4],null);return{c(){s&&s.c()},m(l,o){s&&s.m(l,o),e=!0},p(l,o){s&&s.p&&(!e||o&16)&&Te(s,n,l,l[4],e?Me(n,l[4],o,null):Le(l[4]),null)},i(l){e||(p(s,l),e=!0)},o(l){$(s,l),e=!1},d(l){s&&s.d(l)}}}function Cl(t){let e,n,s,l;const o=[Rl,Sl],i=[];function r(u,c){return u[0]?0:1}return e=r(t),n=i[e]=o[e](t),{c(){n.c(),s=ve()},m(u,c){i[e].m(u,c),y(u,s,c),l=!0},p(u,[c]){let a=e;e=r(u),e===a?i[e].p(u,c):(z(),$(i[a],1,1,()=>{i[a]=null}),W(),n=i[e],n?n.p(u,c):(n=i[e]=o[e](u),n.c()),p(n,1),n.m(s.parentNode,s))},i(u){l||(p(n),l=!0)},o(u){$(n),l=!1},d(u){i[e].d(u),u&&b(s)}}}function Al(t,e,n){let s,{$$slots:l={},$$scope:o}=e,{href:i=null}=e,{disabled:r=!1}=e,{spin:u=!1}=e;const c=jn();function a(f){an.call(this,t,f)}return t.$$set=f=>{"href"in f&&n(0,i=f.href),"disabled"in f&&n(1,r=f.disabled),"spin"in f&&n(2,u=f.spin),"$$scope"in f&&n(4,o=f.$$scope)},t.$$.update=()=>{t.$$.dirty&1&&n(3,s=i?c(i):"")},[i,r,u,s,o,l,a]}class ee extends q{constructor(e){super(),H(this,e,Al,Cl,F,{href:0,disabled:1,spin:2})}}function Il(t){const e=t-1;return e*e*e+1}function Nt(t,{delay:e=0,duration:n=400,easing:s=De}={}){const l=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:s,css:o=>`opacity: ${o*l}`}}function Ut(t,{delay:e=0,duration:n=400,easing:s=Il,x:l=0,y:o=0,opacity:i=0}={}){const r=getComputedStyle(t),u=+r.opacity,c=r.transform==="none"?"":r.transform,a=u*(1-i),[f,h]=pt(l),[m,w]=pt(o);return{delay:e,duration:n,easing:s,css:(g,_)=>`
			transform: ${c} translate(${(1-g)*f}${h}, ${(1-g)*m}${w});
			opacity: ${u-a*_}`}}function jt(t,e,n){const s=t.slice();return s[5]=e[n],s}function Ft(t){let e,n,s=`var(--clr-wtr${t[5]})`,l;return{c(){e=R("div"),S(e,"class","waterblock svelte-lmtips"),ge(e,"background-color",s)},m(o,i){y(o,e,i),l=!0},p(o,i){t=o,i&1&&s!==(s=`var(--clr-wtr${t[5]})`)&&ge(e,"background-color",s)},i(o){l||(o&&pe(()=>{l&&(n||(n=He(e,Ut,{y:-200,duration:200,easing:De},!0)),n.run(1))}),l=!0)},o(o){o&&(n||(n=He(e,Ut,{y:-200,duration:200,easing:De},!1)),n.run(0)),l=!1},d(o){o&&b(e),o&&n&&n.end()}}}function Pl(t){let e,n,s,l,o,i,r=t[0].name+"",u,c,a,f,h=t[0].levels,m=[];for(let g=0;g<h.length;g+=1)m[g]=Ft(jt(t,h,g));const w=g=>$(m[g],1,1,()=>{m[g]=null});return{c(){e=R("div"),n=R("div"),s=R("div"),l=P();for(let g=0;g<m.length;g+=1)m[g].c();o=P(),i=R("h4"),u=j(r),S(s,"class","plug svelte-lmtips"),S(n,"class","tube svelte-lmtips"),S(n,"data-selectable",t[3]),N(n,"selected",t[1]),N(n,"highlight",t[2]),N(n,"unplugged",!t[0].done),S(i,"class","svelte-lmtips"),S(e,"class","tube-slot")},m(g,_){y(g,e,_),L(e,n),L(n,s),L(n,l);for(let d=0;d<m.length;d+=1)m[d]&&m[d].m(n,null);L(e,o),L(e,i),L(i,u),c=!0,a||(f=ye(n,"click",t[4]),a=!0)},p(g,[_]){if(_&1){h=g[0].levels;let d;for(d=0;d<h.length;d+=1){const v=jt(g,h,d);m[d]?(m[d].p(v,_),p(m[d],1)):(m[d]=Ft(v),m[d].c(),p(m[d],1),m[d].m(n,null))}for(z(),d=h.length;d<m.length;d+=1)w(d);W()}(!c||_&8)&&S(n,"data-selectable",g[3]),(!c||_&2)&&N(n,"selected",g[1]),(!c||_&4)&&N(n,"highlight",g[2]),(!c||_&1)&&N(n,"unplugged",!g[0].done),(!c||_&1)&&r!==(r=g[0].name+"")&&Ye(u,r)},i(g){if(!c){for(let _=0;_<h.length;_+=1)p(m[_]);c=!0}},o(g){m=m.filter(Boolean);for(let _=0;_<m.length;_+=1)$(m[_]);c=!1},d(g){g&&b(e),ue(m,g),a=!1,f()}}}function Ol(t,e,n){let{tube:s}=e,{selected:l=!1}=e,{highlight:o=!1}=e,{selectable:i}=e;function r(u){an.call(this,t,u)}return t.$$set=u=>{"tube"in u&&n(0,s=u.tube),"selected"in u&&n(1,l=u.selected),"highlight"in u&&n(2,o=u.highlight),"selectable"in u&&n(3,i=u.selectable)},[s,l,o,i,r]}let Ml=class extends q{constructor(e){super(),H(this,e,Ol,Pl,F,{tube:0,selected:1,highlight:2,selectable:3})}};function Dn(t){if(t.length<=6)return[t];const e=t.length<=14?2:3,n=Math.floor(t.length/e),s=[];for(let l=0,o=0;l<t.length;o++,l+=n){const i=o<t.length%e?1:0;s.push(t.slice(l,l+n+i)),l+=i}return s}function Dt(t,e,n){const s=t.slice();return s[8]=e[n],s}function Bt(t,e,n){const s=t.slice();return s[11]=e[n],s}function zt(t){let e,n;function s(){return t[6](t[11])}return e=new Ml({props:{tube:t[11],selected:t[0]===t[11].id,selectable:t[3](t[11].id),highlight:t[1]===t[11].id}}),e.$on("click",s),{c(){T(e.$$.fragment)},m(l,o){O(e,l,o),n=!0},p(l,o){t=l;const i={};o&4&&(i.tube=t[11]),o&5&&(i.selected=t[0]===t[11].id),o&4&&(i.selectable=t[3](t[11].id)),o&6&&(i.highlight=t[1]===t[11].id),e.$set(i)},i(l){n||(p(e.$$.fragment,l),n=!0)},o(l){$(e.$$.fragment,l),n=!1},d(l){M(e,l)}}}function Wt(t){let e,n,s,l=t[8],o=[];for(let r=0;r<l.length;r+=1)o[r]=zt(Bt(t,l,r));const i=r=>$(o[r],1,1,()=>{o[r]=null});return{c(){e=R("div");for(let r=0;r<o.length;r+=1)o[r].c();n=P(),S(e,"class","tubes-row svelte-17orp1k")},m(r,u){y(r,e,u);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);L(e,n),s=!0},p(r,u){if(u&31){l=r[8];let c;for(c=0;c<l.length;c+=1){const a=Bt(r,l,c);o[c]?(o[c].p(a,u),p(o[c],1)):(o[c]=zt(a),o[c].c(),p(o[c],1),o[c].m(e,n))}for(z(),c=l.length;c<o.length;c+=1)i(c);W()}},i(r){if(!s){for(let u=0;u<l.length;u+=1)p(o[u]);s=!0}},o(r){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)$(o[u]);s=!1},d(r){r&&b(e),ue(o,r)}}}function Tl(t){let e,n,s=t[2],l=[];for(let i=0;i<s.length;i+=1)l[i]=Wt(Dt(t,s,i));const o=i=>$(l[i],1,1,()=>{l[i]=null});return{c(){e=R("div");for(let i=0;i<l.length;i+=1)l[i].c();S(e,"class","tubes-container")},m(i,r){y(i,e,r);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null);n=!0},p(i,[r]){if(r&31){s=i[2];let u;for(u=0;u<s.length;u+=1){const c=Dt(i,s,u);l[u]?(l[u].p(c,r),p(l[u],1)):(l[u]=Wt(c),l[u].c(),p(l[u],1),l[u].m(e,null))}for(z(),u=s.length;u<l.length;u+=1)o(u);W()}},i(i){if(!n){for(let r=0;r<s.length;r+=1)p(l[r]);n=!0}},o(i){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)$(l[r]);n=!1},d(i){i&&b(e),ue(l,i)}}}function Ll(t,e,n){const s=fn();let{tubes:l}=e,{selected:o=null}=e,{highlight:i=null}=e,r=[];function u(f){return o===f?!0:!(l[f].done||o===null&&l[f].empty||o!==null&&l[f].full)}function c(f){u(f)&&s("select",f)}const a=f=>c(f.id);return t.$$set=f=>{"tubes"in f&&n(5,l=f.tubes),"selected"in f&&n(0,o=f.selected),"highlight"in f&&n(1,i=f.highlight)},t.$$.update=()=>{t.$$.dirty&32&&n(2,r=Dn(l))},[o,i,r,u,c,l,a]}class Nl extends q{constructor(e){super(),H(this,e,Ll,Tl,F,{tubes:5,selected:0,highlight:1})}}function Ul(t){let e,n,s,l,o,i;return{c(){e=R("div"),n=R("h2"),s=j(t[1]),S(e,"class",l="modal "+t[0]+" svelte-alsri9")},m(r,u){y(r,e,u),L(e,n),L(n,s),i=!0},p(r,[u]){(!i||u&2)&&Ye(s,r[1]),(!i||u&1&&l!==(l="modal "+r[0]+" svelte-alsri9"))&&S(e,"class",l)},i(r){i||(pe(()=>{i&&(o||(o=He(e,Nt,{delay:100},!0)),o.run(1))}),i=!0)},o(r){o||(o=He(e,Nt,{delay:100},!1)),o.run(0),i=!1},d(r){r&&b(e),r&&o&&o.end()}}}function jl(t,e,n){let s,{result:l}=e,o="";return t.$$set=i=>{"result"in i&&n(2,l=i.result)},t.$$.update=()=>{t.$$.dirty&4&&n(1,s=l?"🏅 You Win 🏅":"You lose 😞"),t.$$.dirty&4&&n(0,o=l?"win":"lose")},[o,s,l]}class Fl extends q{constructor(e){super(),H(this,e,jl,Ul,F,{result:2})}}function Dl(t,e){if(t.empty)throw Error(`source-empty ${t.name}`);if(t.done)throw Error(`source-closed ${t.name}`);if(e.full)throw Error(`target-full ${t.name}`);const n=t.topColor;if(!e.empty&&n!==e.topColor)throw Error("invalid-color");const s=Math.min(t.topAmount,e.emptySpace),l=t.levels.slice(0,-s),o=Array(s).fill(n),i=[...e.levels,...o];return[new X(t.id,l),new X(e.id,i)]}class X{constructor(e,n=[]){this.id=e,this.levels=n}get name(){return String.fromCharCode(65+this.id)}get empty(){return this.levels.length===0}get full(){return this.levels.length>=4}get emptySpace(){return 4-this.levels.length}get done(){return this.levels.length===4&&this.levels[0]===this.levels[1]&&this.levels[1]===this.levels[2]&&this.levels[2]==this.levels[3]}get topColor(){return this.levels.length?this.levels[this.levels.length-1]:null}get topAmount(){if(this.levels.length<=1)return this.levels.length;const e=this.topColor;let n=1;for(;n<this.levels.length;){if(this.levels[this.levels.length-1-n]!=e)return n;n+=1}return this.levels.length}get singleColor(){return this.topAmount===this.levels.length}accepts(e){return this.empty?4:this.full?0:this.topColor===e?this.emptySpace:0}add(e){if(this.full)throw Error(`tube-full ${this.name}`);return new X(this.id,[...this.levels,e])}}const Bn=19;class Ht{constructor(e,n){Ee(this,"cumulative");Ee(this,"tot");this.items=e,this.cumulative=[],this.tot=0;for(let s=0;s<e.length;s++)this.tot+=n[s],this.cumulative.push(this.tot)}randomItem(){const e=Math.random()*this.tot;for(let n=0;n<this.items.length;n++)if(this.cumulative[n]>e)return this.items[n];return this.items[this.items.length-1]}}function Bl(t){let e=[];for(let n=0;n<t.length;n++){const s=t[n];if(!s.done&&!s.empty)for(let l=0;l<t.length;l++){const o=t[l];n!==l&&o.accepts(s.topColor)&&e.push({from:s.id,to:o.id})}}return e}function zl(t){return t.map(e=>e.done||e.empty).reduce((e,n)=>e&&n,!0)}var Ge=(t=>(t[t.Playing=0]="Playing",t[t.Won=1]="Won",t[t.Lost=2]="Lost",t))(Ge||{});class re{constructor(e=[]){Ee(this,"status");Ee(this,"tubes");this.tubes=[];for(const[n,s]of e.entries())s instanceof X?this.tubes.push(s):this.tubes.push(new X(n,s));this.status=0,zl(this.tubes)?this.status=1:this.possibleActions().length===0&&(this.status=2)}possibleActions(){return Bl(this.tubes)}get won(){return this.status===1}get lost(){return this.status===2}get ended(){return this.status!==0}get numClosed(){return this.tubes.filter(e=>e.done).length}historyEntry({from:e,to:n}){if(this.tubes[e].topColor!==this.tubes[n].topColor&&!this.tubes[n].empty)throw new Error("invalid-color");const s=this.tubes[e].topColor;return{fromIndex:e,toIndex:n,fromId:this.tubes[e].name,toId:this.tubes[n].name,color:s,amount:Math.min(this.tubes[e].topAmount,this.tubes[n].accepts(s))}}applyMove({from:e,to:n}){const[s,l]=Dl(this.tubes[e],this.tubes[n]),o=[...this.tubes];return o[e]=s,o[n]=l,new re(o)}add(e,n){const s=[...this.tubes];return s[n]=this.tubes[n].add(e),new re(s)}getHash(){return this.tubes.map(e=>e.levels.concat(e.full?[]:[0])).flat().map(e=>e.toString(36)).join("")}}function lt(t){return t[Math.floor(Math.random()*t.length)]}function Wl(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}}function Hl(t){const e=Array(Bn).fill(null).map((n,s)=>s+1);return Wl(e),e.slice(0,t)}function zn(t=0){t==0&&(t=10+Math.floor(Math.random()*6));const e=Hl(t-2),n=new Array(t-2).fill(null).map((o,i)=>new Array(4).fill(e[i])).concat([[],[]]),s=new re(n);for(let o=0;o<70;o++){const i=new Ht(s.tubes,s.tubes.map(h=>h.topAmount)).randomItem(),r=s.tubes.filter(h=>!h.full&&h.id!==i.id),u=lt(r),c=Math.min(i.singleColor?i.topAmount-1:i.topAmount,u.emptySpace),a=new Ht([1,2,3].splice(0,c),[1,3,9].splice(c)).randomItem(),f=i.levels.splice(-a);u.levels.push(...f)}let l=s.tubes.filter(o=>o.empty).length;for(let o=0;o<100&&l<2;o++){const i=s.tubes.filter(c=>!c.empty),r=lt(i),u=s.tubes.filter(c=>!c.full&&c.levels.length>r.levels.length);if(u.length>0){const c=lt(u),a=r.levels.splice(-1);c.levels.push(...a)}l=s.tubes.filter(c=>c.empty).length}return new re(s.tubes)}const Ke=B(zn());function ql(){return new Worker("/colortubes/assets/solve-worker-c82bd38d.js")}function Gl(t){let e;return{c(){e=j("New")},m(n,s){y(n,e,s)},d(n){n&&b(e)}}}function Kl(t){let e;return{c(){e=j("Custom")},m(n,s){y(n,e,s)},d(n){n&&b(e)}}}function Yl(t){let e;return{c(){e=j("Reset")},m(n,s){y(n,e,s)},d(n){n&&b(e)}}}function qt(t){let e,n;return e=new ee({props:{spin:t[1],$$slots:{default:[Vl]},$$scope:{ctx:t}}}),e.$on("click",t[8]),{c(){T(e.$$.fragment)},m(s,l){O(e,s,l),n=!0},p(s,l){const o={};l&2&&(o.spin=s[1]),l&16384&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function Vl(t){let e;return{c(){e=j("Solve")},m(n,s){y(n,e,s)},d(n){n&&b(e)}}}function Gt(t){let e,n;return e=new ee({props:{$$slots:{default:[Ql]},$$scope:{ctx:t}}}),e.$on("click",t[10]),{c(){T(e.$$.fragment)},m(s,l){O(e,s,l),n=!0},p(s,l){const o={};l&16384&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function Ql(t){let e;return{c(){e=j("💡")},m(n,s){y(n,e,s)},d(n){n&&b(e)}}}function Jl(t){let e,n,s,l,o,i,r,u,c;e=new ee({props:{$$slots:{default:[Gl]},$$scope:{ctx:t}}}),e.$on("click",t[6]),s=new ee({props:{href:"/edit",$$slots:{default:[Kl]},$$scope:{ctx:t}}}),o=new ee({props:{$$slots:{default:[Yl]},$$scope:{ctx:t}}}),o.$on("click",t[7]);let a=t[0]&&t[4].length==0&&qt(t),f=t[4].length>0&&Gt(t);return{c(){T(e.$$.fragment),n=P(),T(s.$$.fragment),l=P(),T(o.$$.fragment),i=P(),a&&a.c(),r=P(),f&&f.c(),u=ve()},m(h,m){O(e,h,m),y(h,n,m),O(s,h,m),y(h,l,m),O(o,h,m),y(h,i,m),a&&a.m(h,m),y(h,r,m),f&&f.m(h,m),y(h,u,m),c=!0},p(h,m){const w={};m&16384&&(w.$$scope={dirty:m,ctx:h}),e.$set(w);const g={};m&16384&&(g.$$scope={dirty:m,ctx:h}),s.$set(g);const _={};m&16384&&(_.$$scope={dirty:m,ctx:h}),o.$set(_),h[0]&&h[4].length==0?a?(a.p(h,m),m&17&&p(a,1)):(a=qt(h),a.c(),p(a,1),a.m(r.parentNode,r)):a&&(z(),$(a,1,1,()=>{a=null}),W()),h[4].length>0?f?(f.p(h,m),m&16&&p(f,1)):(f=Gt(h),f.c(),p(f,1),f.m(u.parentNode,u)):f&&(z(),$(f,1,1,()=>{f=null}),W())},i(h){c||(p(e.$$.fragment,h),p(s.$$.fragment,h),p(o.$$.fragment,h),p(a),p(f),c=!0)},o(h){$(e.$$.fragment,h),$(s.$$.fragment,h),$(o.$$.fragment,h),$(a),$(f),c=!1},d(h){M(e,h),h&&b(n),M(s,h),h&&b(l),M(o,h),h&&b(i),a&&a.d(h),h&&b(r),f&&f.d(h),h&&b(u)}}}function Kt(t){let e,n;return e=new Fl({props:{result:t[2].status==Ge.Won}}),{c(){T(e.$$.fragment)},m(s,l){O(e,s,l),n=!0},p(s,l){const o={};l&4&&(o.result=s[2].status==Ge.Won),e.$set(o)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function Xl(t){let e,n,s,l,o,i,r;e=new Fn({props:{$$slots:{default:[Jl]},$$scope:{ctx:t}}}),l=new Nl({props:{tubes:t[2].tubes,selected:t[3],highlight:t[5]}}),l.$on("select",t[9]);let u=t[2].ended&&Kt(t);return{c(){T(e.$$.fragment),n=P(),s=R("div"),T(l.$$.fragment),o=P(),u&&u.c(),i=ve(),S(s,"class","cols-2 svelte-m2jv0k")},m(c,a){O(e,c,a),y(c,n,a),y(c,s,a),O(l,s,null),y(c,o,a),u&&u.m(c,a),y(c,i,a),r=!0},p(c,[a]){const f={};a&16403&&(f.$$scope={dirty:a,ctx:c}),e.$set(f);const h={};a&4&&(h.tubes=c[2].tubes),a&8&&(h.selected=c[3]),a&32&&(h.highlight=c[5]),l.$set(h),c[2].ended?u?(u.p(c,a),a&4&&p(u,1)):(u=Kt(c),u.c(),p(u,1),u.m(i.parentNode,i)):u&&(z(),$(u,1,1,()=>{u=null}),W())},i(c){r||(p(e.$$.fragment,c),p(l.$$.fragment,c),p(u),r=!0)},o(c){$(e.$$.fragment,c),$(l.$$.fragment,c),$(u),r=!1},d(c){M(e,c),c&&b(n),c&&b(s),M(l),c&&b(o),u&&u.d(c),c&&b(i)}}}function Zl(t,e,n){let s;D(t,Ke,d=>n(12,s=d));let l=null,o=!1,i=s,r,u=[],c=[],a=null;cn(async()=>{console.log("initializing web worker"),n(0,l=new ql),n(0,l.onmessage=function(d){d.data.result===Ge.Won&&(n(4,c=d.data.actions),console.debug(c)),n(1,o=!1)},l)});function f(){console.debug("generating new game"),Ke.set(zn()),n(2,i=s),u=[],n(4,c=[]),n(5,a=null)}function h(){n(2,i=s),n(3,r=null),u=[],n(4,c=[]),n(5,a=null)}function m(){l.postMessage(i),n(1,o=!0)}function w(d){const v=d.detail;if(r===null)n(3,r=v),console.debug(`selecting ${r}`);else if(r===v)console.debug(`deselecting ${r}`),n(3,r=null);else{if(g(r,v),c.length>0){const k=c[0];v===k.toIndex&&r===k.fromIndex?n(4,c=c.slice(1)):n(4,c=[])}n(3,r=null),n(5,a=null)}}function g(d,v){try{const k=i.historyEntry({from:d,to:v});n(2,i=i.applyMove({from:d,to:v})),console.debug(`applied move ${JSON.stringify(k)}`),u=[...u,k]}catch(k){console.log(k.message)}}function _(){c.length>0&&(n(3,r=c[0].fromIndex),n(5,a=c[0].toIndex))}return[l,o,i,r,c,a,f,h,m,w,_]}class xl extends q{constructor(e){super(),H(this,e,Zl,Xl,F,{})}}function Yt(t,e,n){const s=t.slice();return s[7]=e[n],s}function Vt(t){let e,n=(t[0][t[7]]||"")+"",s,l=`var(--clr-wtr${t[7]>=0?t[7]:"-none"})`,o,i;function r(){return t[4](t[7])}return{c(){e=R("button"),s=j(n),S(e,"class","cell svelte-1smq6qh"),N(e,"curr",t[7]===t[1]),N(e,"extra",t[0][t[7]]>4),ge(e,"--color",l)},m(u,c){y(u,e,c),L(e,s),o||(i=ye(e,"click",r),o=!0)},p(u,c){t=u,c&1&&n!==(n=(t[0][t[7]]||"")+"")&&Ye(s,n),c&6&&N(e,"curr",t[7]===t[1]),c&5&&N(e,"extra",t[0][t[7]]>4)},d(u){u&&b(e),o=!1,i()}}}function eo(t){let e,n,s,l,o,i=t[2],r=[];for(let u=0;u<i.length;u+=1)r[u]=Vt(Yt(t,i,u));return{c(){e=R("div");for(let u=0;u<r.length;u+=1)r[u].c();n=P(),s=R("button"),S(s,"class","cell empty svelte-1smq6qh"),N(s,"curr",t[1]===null),ge(s,"--color","var(--clr-wtr-none)"),S(e,"class","palette svelte-1smq6qh")},m(u,c){y(u,e,c);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);L(e,n),L(e,s),l||(o=ye(s,"click",t[5]),l=!0)},p(u,[c]){if(c&15){i=u[2];let a;for(a=0;a<i.length;a+=1){const f=Yt(u,i,a);r[a]?r[a].p(f,c):(r[a]=Vt(f),r[a].c(),r[a].m(e,n))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}c&2&&N(s,"curr",u[1]===null)},i:U,o:U,d(u){u&&b(e),ue(r,u),l=!1,o()}}}function to(t,e,n){const s=fn();let{counts:l={}}=e;const o=Array(Bn).fill(null).map((a,f)=>f+1);let i=null;function r(a){n(1,i=a),s("color-pick",a)}const u=a=>r(a),c=()=>r(null);return t.$$set=a=>{"counts"in a&&n(0,l=a.counts)},[l,i,o,r,u,c]}class no extends q{constructor(e){super(),H(this,e,to,eo,F,{counts:0})}}function Qt(t,e,n){const s=t.slice();return s[14]=e[n],s}function Jt(t,e,n){const s=t.slice();return s[17]=e[n],s}function Xt(t,e,n){const s=t.slice();return s[20]=e[n],s[22]=n,s}function so(t){let e;return{c(){e=j("Reset")},m(n,s){y(n,e,s)},d(n){n&&b(e)}}}function lo(t){let e;return{c(){e=j("Discard")},m(n,s){y(n,e,s)},d(n){n&&b(e)}}}function oo(t){let e;return{c(){e=j("Play")},m(n,s){y(n,e,s)},d(n){n&&b(e)}}}function ro(t){let e,n,s,l,o,i;return e=new ee({props:{$$slots:{default:[so]},$$scope:{ctx:t}}}),e.$on("click",t[5]),s=new ee({props:{href:"/",$$slots:{default:[lo]},$$scope:{ctx:t}}}),o=new ee({props:{disabled:!t[3],$$slots:{default:[oo]},$$scope:{ctx:t}}}),o.$on("click",t[8]),{c(){T(e.$$.fragment),n=P(),T(s.$$.fragment),l=P(),T(o.$$.fragment)},m(r,u){O(e,r,u),y(r,n,u),O(s,r,u),y(r,l,u),O(o,r,u),i=!0},p(r,u){const c={};u&8388608&&(c.$$scope={dirty:u,ctx:r}),e.$set(c);const a={};u&8388608&&(a.$$scope={dirty:u,ctx:r}),s.$set(a);const f={};u&8&&(f.disabled=!r[3]),u&8388608&&(f.$$scope={dirty:u,ctx:r}),o.$set(f)},i(r){i||(p(e.$$.fragment,r),p(s.$$.fragment,r),p(o.$$.fragment,r),i=!0)},o(r){$(e.$$.fragment,r),$(s.$$.fragment,r),$(o.$$.fragment,r),i=!1},d(r){M(e,r),r&&b(n),M(s,r),r&&b(l),M(o,r)}}}function Zt(t){let e,n=`var(${tn(t[17],t[22])})`,s,l;function o(){return t[9](t[17],t[22])}return{c(){e=R("div"),S(e,"class","block svelte-jgsu2c"),ge(e,"background-color",n)},m(i,r){y(i,e,r),s||(l=ye(e,"click",o),s=!0)},p(i,r){t=i,r&4&&n!==(n=`var(${tn(t[17],t[22])})`)&&ge(e,"background-color",n)},d(i){i&&b(e),s=!1,l()}}}function xt(t){let e,n=Array(4),s=[];for(let l=0;l<n.length;l+=1)s[l]=Zt(Xt(t,n,l));return{c(){e=R("div");for(let l=0;l<s.length;l+=1)s[l].c();S(e,"class","tube svelte-jgsu2c")},m(l,o){y(l,e,o);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null)},p(l,o){if(o&132){n=Array(4);let i;for(i=0;i<n.length;i+=1){const r=Xt(l,n,i);s[i]?s[i].p(r,o):(s[i]=Zt(r),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=n.length}},d(l){l&&b(e),ue(s,l)}}}function en(t){let e,n,s=t[14],l=[];for(let o=0;o<s.length;o+=1)l[o]=xt(Jt(t,s,o));return{c(){e=R("div");for(let o=0;o<l.length;o+=1)l[o].c();n=P(),S(e,"class","tubes-row svelte-jgsu2c")},m(o,i){y(o,e,i);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null);L(e,n)},p(o,i){if(i&132){s=o[14];let r;for(r=0;r<s.length;r+=1){const u=Jt(o,s,r);l[r]?l[r].p(u,i):(l[r]=xt(u),l[r].c(),l[r].m(e,n))}for(;r<l.length;r+=1)l[r].d(1);l.length=s.length}},d(o){o&&b(e),ue(l,o)}}}function io(t){let e,n,s,l,o,i,r,u,c,a,f,h,m,w;e=new Fn({props:{$$slots:{default:[ro]},$$scope:{ctx:t}}}),c=new no({props:{counts:t[1]}}),c.$on("color-pick",t[6]);let g=t[2],_=[];for(let d=0;d<g.length;d+=1)_[d]=en(Qt(t,g,d));return{c(){T(e.$$.fragment),n=P(),s=R("div"),l=R("label"),l.textContent="Num. Tubes",o=P(),i=R("input"),u=P(),T(c.$$.fragment),a=P(),f=R("div");for(let d=0;d<_.length;d+=1)_[d].c();S(l,"for","num_tubes"),S(i,"type","number"),S(i,"name","num_tubes"),S(i,"min","5"),S(i,"max","20"),i.value=r=t[0].tubes.length,S(i,"class","svelte-jgsu2c")},m(d,v){O(e,d,v),y(d,n,v),y(d,s,v),L(s,l),L(s,o),L(s,i),y(d,u,v),O(c,d,v),y(d,a,v),y(d,f,v);for(let k=0;k<_.length;k+=1)_[k]&&_[k].m(f,null);h=!0,m||(w=ye(i,"change",t[4]),m=!0)},p(d,[v]){const k={};v&8388616&&(k.$$scope={dirty:v,ctx:d}),e.$set(k),(!h||v&1&&r!==(r=d[0].tubes.length)&&i.value!==r)&&(i.value=r);const A={};if(v&2&&(A.counts=d[1]),c.$set(A),v&132){g=d[2];let C;for(C=0;C<g.length;C+=1){const Y=Qt(d,g,C);_[C]?_[C].p(Y,v):(_[C]=en(Y),_[C].c(),_[C].m(f,null))}for(;C<_.length;C+=1)_[C].d(1);_.length=g.length}},i(d){h||(p(e.$$.fragment,d),p(c.$$.fragment,d),h=!0)},o(d){$(e.$$.fragment,d),$(c.$$.fragment,d),h=!1},d(d){M(e,d),d&&b(n),d&&b(s),d&&b(u),M(c,d),d&&b(a),d&&b(f),ue(_,d),m=!1,w()}}}function uo(t){return t.length<4?t.concat(new Array(4-t.length).fill(0)):t}function co(t){const e={};for(const n of t)for(const s of n.levels)s&&(e[s]=++e[s]||1);return e}function tn(t,e){const n=t.levels[e];return n>0?"--clr-wtr"+n:"--clr-none"}function fo(t){console.debug("is playable?"),console.debug(t);const e=new Set(Object.values(t));return console.debug(e),e.size===1&&e.has(4)}function ao(t,e,n){let s;D(t,Ke,d=>n(11,s=d));let l=s,o=[l.tubes],i=null,r={},u=!1;function c(d,v=0){return Array(d).fill(null).map((k,A)=>new X(v+A,[0,0,0,0]))}function a(d){const k=+d.target.value;if(k<l.tubes.length&&n(0,l.tubes=l.tubes.slice(0,k),l),k>l.tubes.length){const A=k-l.tubes.length;n(0,l.tubes=[...l.tubes,...c(A,l.tubes.length)],l)}}function f(){n(0,l=new re(c(l.tubes.length)))}function h(d){return d.map(v=>{const k=v.levels.indexOf(0);return k>=0?new X(v.id,v.levels.slice(0,k)):v})}function m(d){i=d.detail}function w(d,v){console.debug(`apply color ${i} to tube ${d} level ${v}`);const k=l.tubes[d],A=uo([...k.levels]);A[v]=i||0;const C=[...l.tubes];C[d]=new X(k.id,A),n(0,l.tubes=C,l)}function g(){if(u){const d=new re(h(l.tubes));Ke.set(d),Tn("/")}}const _=(d,v)=>w(d.id,v);return t.$$.update=()=>{t.$$.dirty&1&&n(2,o=Dn(l.tubes)),t.$$.dirty&1&&n(1,r=co(l.tubes)),t.$$.dirty&2&&n(3,u=fo(r))},[l,r,o,u,a,f,m,w,g,_]}class ho extends q{constructor(e){super(),H(this,e,ao,io,F,{})}}function mo(t){let e,n;return e=new xl({}),{c(){T(e.$$.fragment)},m(s,l){O(e,s,l),n=!0},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function _o(t){let e,n;return e=new ho({}),{c(){T(e.$$.fragment)},m(s,l){O(e,s,l),n=!0},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function go(t){let e,n,s,l;return e=new Tt({props:{path:"/",$$slots:{default:[mo]},$$scope:{ctx:t}}}),s=new Tt({props:{path:"/edit",$$slots:{default:[_o]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment),n=P(),T(s.$$.fragment)},m(o,i){O(e,o,i),y(o,n,i),O(s,o,i),l=!0},p(o,i){const r={};i&1&&(r.$$scope={dirty:i,ctx:o}),e.$set(r);const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),s.$set(u)},i(o){l||(p(e.$$.fragment,o),p(s.$$.fragment,o),l=!0)},o(o){$(e.$$.fragment,o),$(s.$$.fragment,o),l=!1},d(o){M(e,o),o&&b(n),M(s,o)}}}function po(t){let e,n,s,l,o,i;return o=new Nn({props:{basepath:"/colortubes",$$slots:{default:[go]},$$scope:{ctx:t}}}),{c(){e=R("div"),n=R("header"),n.innerHTML='<h1 class="svelte-epiei1">Color Water Tubes</h1>',s=P(),l=R("main"),T(o.$$.fragment),S(n,"class","svelte-epiei1"),S(e,"class","root-container svelte-epiei1")},m(r,u){y(r,e,u),L(e,n),L(e,s),L(e,l),O(o,l,null),i=!0},p(r,[u]){const c={};u&1&&(c.$$scope={dirty:u,ctx:r}),o.$set(c)},i(r){i||(p(o.$$.fragment,r),i=!0)},o(r){$(o.$$.fragment,r),i=!1},d(r){r&&b(e),M(o)}}}class bo extends q{constructor(e){super(),H(this,e,null,po,F,{})}}new bo({target:document.getElementById("app")});
